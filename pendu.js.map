{
  "version": 3,
  "file": "pendu.js",
  "sourceRoot": "/",
  "sources": [
    "pendu.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "    \ngame =\n    revealedWord : ''\n    hiddenWord   : ''\n    gamesCounter : ''   # does not show zero\n    failsCounter : ''   # same\n\n    keyboardKeys : []\n    gameKey      : null\n    \n# --------------------------------------\ncreateKeyboard = ->\n    footer = document.getElementById('footer')\n    keyboard = document.createElement('div')    # keyboard container\n    keyboard.style.marginTop = '10px'\n    footer.appendChild keyboard\n\n    # Define rows of alphabetic keys\n    rows = [\n        ['A','B','C','D','E','F','G']\n        ['H','I','J','K','L','M','N']\n        ['O','P','Q','R','S','T','U']\n        ['V','W','X','Y','Z']\n        ['COMMENCER', 'AU SUJET']\n    ]\n\n    # ----- Local function to create one virtual keyboard button\n    createButton = (buttonName) ->\n        btn = document.createElement('button')\n        btn.onclick = ->\n            switch buttonName\n                when 'COMMENCER'\n                    play()\n                when 'AU SUJET'\n                    aide = document.getElementById(\"aide\").innerHTML\n                    showDialog(aide)\n                else\n                    btn.disabled = true\n                    guess buttonName\n\n        btn.textContent = buttonName\n        btn.style.cursor = 'pointer'\n        btn.style.margin = '2px'\n        btn.style.padding = '5px 14px'\n        btn.style.fontSize = '16px'\n\n        if buttonName.length == 1\n            game.keyboardKeys.push btn   # record alpha key reference\n            btn.disabled = true\n        else if buttonName == 'COMMENCER'\n            game.gameKey = btn         # record game key reference\n\n        return btn\n    # ----------------------------------\n    \n    # Generate virtual keyboard\n    for row in rows\n        rowDiv = document.createElement('div')\n        rowDiv.style.marginBottom = '5px'\n\n        for buttonName in row\n            rowDiv.appendChild createButton(buttonName)\n\n        keyboard.appendChild rowDiv\n\n# --------------------------------------\nupdateLabels = ->\n    scores = document.getElementById('scores')\n    s = '&nbsp;'\n    prefix = '<li><kbd style=\"font-size: 16px;\">' + \"#{s}#{s}#{s}#{s}\"\n\n    labels  = \"#{prefix}Partie no: #{game.gamesCounter}</kbd>\"\n    labels += \"#{prefix}Mot caché: #{game.revealedWord}</kbd>\"\n    labels += \"#{prefix}#{s}#{s}#{s}Échecs: #{game.failsCounter}</kbd>\"\n\n    scores.innerHTML = labels\n\n# -------------------------------------\nreveal = (letter) ->\n    collator = new Intl.Collator('fr', {sensitivity: 'base'})\n    revealed = game.revealedWord.split('')\n\n    for ch, index in game.hiddenWord when collator.compare(ch, letter) is 0\n        revealed[index] = game.hiddenWord[index]\n\n    game.revealedWord = revealed.join('')\n\n# --------------------------------------\nguess = (letter) ->\n    beforeReveal = game.revealedWord\n    reveal letter\n    updateLabels()\n\n    if game.revealedWord is beforeReveal\n        game.failsCounter++\n        updateLabels()\n        image_file = \"resources/pendu_#{game.failsCounter}.png\"\n        document.getElementById('gallows').src = image_file\n\n    if game.failsCounter == 10\n        game.revealedWord = game.hiddenWord\n        updateLabels()\n        key.disabled = true for key in game.keyboardKeys\n        game.gameKey.textContent = 'NOUVEAU MOT'\n        \n        showDialog \"Vous avez perdu!<br><br>Le mot caché était: #{game.hiddenWord}\"\n    else if game.revealedWord is game.hiddenWord\n        key.disabled = true for key in game.keyboardKeys\n        game.gameKey.textContent = 'NOUVEAU MOT'\n        showDialog \"Bravo!<br><br>Vous avez gagné.\"\n\n# --------------------------------------\nreveal_word = ->\n  msg = 'Révéler le mot caché terminera cette partie.<br><br>Êtes-vous certain?'\n  showConfirmDialog(msg).then (confirmed) ->\n    if confirmed\n        # disable all virtual alphabetical keys\n        key.disabled = true for key in game.keyboardKeys\n        game.revealedWord = game.hiddenWord\n        game.gameKey.textContent = 'NOUVEAU MOT'\n        updateLabels()\n\n# --------------------------------------\ngenerate_new_word = ->\n    # pick random word from WORDS[] array defined in pendu_mots.js\n    while true\n        game.hiddenWord = window.WORDS[Math.floor(Math.random() * window.WORDS.length)].toLowerCase()\n        # Avoid extra-long words (limit subject to change...)\n        if game.hiddenWord.length <= 20 then break\n\n    game.revealedWord = '*'.repeat(game.hiddenWord.length)\n\n    reveal '('\n    reveal ')'\n    reveal '-'\n\n    game.gamesCounter++\n    game.failsCounter = ''\n\n    # enable all virtual alphabetic keys\n    key.disabled = false for key in game.keyboardKeys\n\n    document.getElementById('gallows').src = 'resources/pendu_0.png'\n    updateLabels()\n    game.gameKey.textContent = 'RÉVÉLER MOT'\n\n    showDialog \"Partie no. #{game.gamesCounter}<br><br>\" + \n        \"Mot caché de #{game.hiddenWord.length} lettres\"\n# --------------------------------------\nplay = ->\n    switch game.gameKey.textContent\n        when 'COMMENCER', 'NOUVEAU MOT'\n            generate_new_word()\n        when 'RÉVÉLER MOT'\n            reveal_word()\n\n# --------------------------------------\nshowDialog = (message) ->\n  dialog = document.createElement('dialog')\n  dialog.innerHTML = \"\"\"\n    <p>#{message}</p>\n    <center>\n      <button id=\"okBtn\">OK</button>\n    </center>\n  \"\"\"\n  \n  document.body.appendChild(dialog)\n  dialog.showModal()\n\n  okBtn = dialog.querySelector('#okBtn')\n  okBtn.style.fontSize = '16px'\n  okBtn.style.padding = '5px 20px'\n  okBtn.onclick = ->\n    dialog.close()\n    dialog.remove()\n  \n# --------------------------------------\nshowConfirmDialog = (message) ->\n  dialog = document.createElement('dialog')\n  dialog.innerHTML = \"\"\"\n    <p>#{message}</p>\n    <center>\n      <button id=\"okBtn\">Oui</button>\n      <button id=\"cancelBtn\">Non</button>\n    </center>\n  \"\"\"\n\n  # OK button\n  okBtn = dialog.querySelector('#okBtn')\n  okBtn.style.padding = '5px 20px'\n  okBtn.style.fontSize = '16px'\n  okBtn.onclick = ->\n    dialog.returnValue = 'ok'\n    dialog.close()\n    dialog.remove()\n\n  # Cancel button\n  cancelBtn = dialog.querySelector('#cancelBtn')\n  cancelBtn.style.padding = '5px 20px'\n  cancelBtn.style.fontSize = '16px'\n  cancelBtn.onclick = ->\n    dialog.close()\n    dialog.remove()\n\n  document.body.appendChild(dialog)\n  dialog.showModal()\n\n  # Return Promise for async result\n  new Promise (resolve) ->\n    dialog.onclose = ->\n      result = dialog.returnValue\n      resolve(result == 'ok')\n\n# **************************************\ndo ->\n    createKeyboard()\n"
  ]
}